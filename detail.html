<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>IT日本語会話 ・ Lesson</title>
    <meta name="description" content="Luyện hội thoại IT tiếng Nhật với mẫu câu, từ vựng và tình huống thực tế. Bài học ngắn gọn, dễ theo dõi." />

    <link rel="canonical" href="https://it-nihongo-kaiwa.github.io/detail.html" />
    <meta name="robots" content="index,follow" />
    <meta name="theme-color" content="#163a5b" />

    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="IT日本語会話" />
    <meta property="og:title" content="IT日本語会話 ・ Lesson" />
    <meta property="og:description" content="Luyện hội thoại IT tiếng Nhật với mẫu câu, từ vựng và tình huống thực tế." />
    <meta property="og:url" content="https://it-nihongo-kaiwa.github.io/detail.html" />
    <meta property="og:image" content="https://it-nihongo-kaiwa.github.io/logo.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="IT日本語会話 ・ Lesson" />
    <meta name="twitter:description" content="Luyện hội thoại IT tiếng Nhật với mẫu câu, từ vựng và tình huống thực tế." />
    <meta name="twitter:image" content="https://it-nihongo-kaiwa.github.io/logo.png" />

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css" />
    <meta name="color-scheme" content="light" />
  </head>
  <body>
    <noscript class="no-js-warning">
      Ứng dụng cần JavaScript để tải nội dung. Vui lòng bật JavaScript cho it-nihongo-kaiwa.
    </noscript>

    <header class="site-header">
      <div class="wrap header-inner">
        <a href="index.html" class="brand" title="IT日本語会話">
          <img src="logo.png" alt="IT 日本語会話" class="logo" />
          <h1 class="site-title">IT日本語会話</h1>
        </a>
        <nav class="topnav">
          <a href="index.html" class="toplink" id="nav-projects">Home</a>
        </nav>
      </div>
    </header>

    <div class="layout wrap">
      <main class="content card full" id="content" aria-live="polite">
        <div class="content-inner" id="route-container">
          <section id="detail-controls" class="detail-controls" hidden>
            <button id="btn-vn" class="icon-btn active" aria-pressed="true" title="Hiện/ẩn tiếng Việt (VN)">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <button id="btn-print" class="icon-btn" type="button" title="In bài học" aria-label="In bài học">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M6 9V3h12v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M6 17h12v4H6v-4z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M6 13H5a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v1a3 3 0 0 1-3 3h-1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </section>
          <article id="markdown-view" hidden>
            <p class="loading">Loading lesson…</p>
          </article>
          <section id="pronunciation-panel" class="pronunciation-panel">
            <div class="pronunciation-header">
              <div>
                <h2 class="pronunciation-title">Kiểm tra phát âm</h2>
                <p class="pronunciation-subtitle"></p>
              </div>
              <button id="toggle-pronunciation" class="icon-btn pronunciation-toggle" type="button" aria-label="Thu gọn/ mở rộng">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </div>
            <div class="pronunciation-body">
            <div class="pronunciation-target">
              <div class="score-label">Câu đang chọn</div>
              <div id="selected-line" class="selected-line">Hãy chọn 1 câu hội thoại.</div>
              <div class="pronunciation-target-actions">
                <button id="next-sentence" class="btn btn-secondary" disabled>Câu tiếp theo</button>
                <button id="clear-selection" class="btn btn-secondary" type="button" disabled>Bỏ chọn</button>
              </div>
            </div>
              <div class="pronunciation-key">
                <label for="openai-key">OpenAI API Key</label>
                <div class="key-row">
                  <input id="openai-key" type="password" placeholder="[REDACTED]..." autocomplete="off" />
                  <button id="save-key" class="btn btn-secondary" type="button">Lưu</button>
                </div>
                <p class="key-hint">Key chỉ lưu trong trình duyệt của bạn.</p>
              </div>
              <div class="pronunciation-controls">
                <button id="record-toggle" class="btn" disabled>Bắt đầu ghi</button>
                <button id="play-recording" class="btn btn-secondary" disabled>Nghe lại</button>
                <span id="record-timer" class="record-timer">00:00</span>
              </div>
              <audio id="recording-audio" class="recording-audio" controls hidden></audio>
              <div id="pronunciation-status" class="pronunciation-status"></div>
              <div id="pronunciation-result" class="pronunciation-result" hidden>
                <div class="score-row">
                  <div class="score-label">Điểm tổng</div>
                  <div id="score-overall" class="score-value">--</div>
                </div>
                <div class="score-summary">
                  <div class="score-label">Kết luận</div>
                  <p id="score-summary-text"></p>
                </div>
                <div class="score-grid">
                  <div class="score-item">
                    <div class="score-label">Phát âm</div>
                    <div id="score-pronunciation" class="score-value">--</div>
                    <div class="score-bar"><span id="score-pronunciation-bar" class="score-bar-fill"></span></div>
                  </div>
                  <div class="score-item">
                    <div class="score-label">Ngữ điệu</div>
                    <div id="score-intonation" class="score-value">--</div>
                    <div class="score-bar"><span id="score-intonation-bar" class="score-bar-fill"></span></div>
                  </div>
                  <div class="score-item">
                    <div class="score-label">Tốc độ</div>
                    <div id="score-pace" class="score-value">--</div>
                    <div class="score-bar"><span id="score-pace-bar" class="score-bar-fill"></span></div>
                  </div>
                  <div class="score-item">
                    <div class="score-label">Trôi chảy</div>
                    <div id="score-fluency" class="score-value">--</div>
                    <div class="score-bar"><span id="score-fluency-bar" class="score-bar-fill"></span></div>
                  </div>
                  <div class="score-item">
                    <div class="score-label">Đọc đúng</div>
                    <div id="score-accuracy" class="score-value">--</div>
                    <div class="score-bar"><span id="score-accuracy-bar" class="score-bar-fill"></span></div>
                  </div>
                </div>
                <div class="score-notes">
                  <div class="score-label">Nhận xét</div>
                  <p id="score-notes-text"></p>
                </div>
                <div class="score-notes">
                  <div class="score-label">Gợi ý cải thiện</div>
                  <p id="score-tips-text"></p>
                </div>
                <div class="transcript-block">
                  <div class="score-label">Transcription</div>
                  <p id="transcript-text"></p>
                </div>
              </div>
            </div>
          </section>
          <nav class="lesson-nav" aria-label="Điều hướng bài học">
            <a id="btn-prev" class="lesson-nav-link prev" aria-label="Bài trước">
              <span class="lesson-nav-arrow" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
              <span class="lesson-nav-body">
                <span class="lesson-nav-label">Bài trước</span>
                <span class="lesson-nav-title" id="prev-title">---</span>
              </span>
            </a>
            <a id="btn-next" class="lesson-nav-link next" aria-label="Bài sau">
              <span class="lesson-nav-body">
                <span class="lesson-nav-label">Bài sau</span>
                <span class="lesson-nav-title" id="next-title">---</span>
              </span>
              <span class="lesson-nav-arrow" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </a>
          </nav>
          <section id="outline-view" class="outline">
            <p class="loading">Đang tải mục lục…</p>
          </section>
        </div>
      </main>
    </div>

    <footer class="site-footer">
      <div class="wrap">
        <small>©2025 IT Nihongo Kaiwa</small>
      </div>
    </footer>
    <div id="print-area" class="print-area" aria-hidden="true"></div>

    <script defer src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script type="module" src="js/detail-page.js"></script>
  </body>
  </html>
